# appointment-platform

Платформа записи на услуги через Telegram-бота с календарным ядром, gRPC-бэкендом и базой данных PostgreSQL.

Система позволяет:
- клиентам записываться на услуги через Telegram;
- представителям услуг управлять своим расписанием;
- администратору сопровождать работу системы.

---

## Возможности

### Для клиентов

- Регистрация и идентификация по Telegram ID
- Выбор роли (клиент / представитель услуг / администратор)
- Просмотр доступных услуг и исполнителей
- Просмотр доступных временных слотов
- Создание записи на выбранный слот
- Отмена записи
- Просмотр предстоящих и прошедших записей

### Для представителей услуг

- Настройка рабочего времени и доступности
- Формирование временных слотов на основе рабочего расписания
- Просмотр собственных записей
- Базовая проверка конфликтов при создании новых записей

### Для администратора

- Управление списком услуг
- Управление представителями услуг и их доступом
- Просмотр записей для решения спорных ситуаций и аудита

### Инфраструктура

- gRPC API между Telegram-ботом и бэкендом
- PostgreSQL как основная СУБД
- Контейнеризация сервисов (Docker / Docker Compose)
- Базовое логирование и мониторинг (планируется)

---

## Архитектура

Высокоуровневая схема:

- **Telegram-бот (`apps/tg-bot`)**
  - Python, библиотека aiogram 3.x
  - Обрабатывает все взаимодействие с пользователем в Telegram
  - Обращается к бэкенду по gRPC

- **Бэкенд / календарное ядро (`services/calendar-core`, `services/booking-api`)**
  - Go (gRPC-сервер)
  - Реализует доменную логику:
    - услуги и исполнители
    - расписания и временные слоты
    - записи (бронирования)
  - Работает с PostgreSQL

- **База данных**
  - PostgreSQL
  - Схема для:
    - пользователей и их ролей
    - услуг
    - представителей услуг
    - временных слотов
    - записей (бронирований)
  - Миграции хранятся в отдельном каталоге

- **Инфраструктура (`infra/`)**
  - Docker/Docker Compose для локального развёртывания
  - Миграции БД
  - Конфигурация окружения

---

## Структура репозитория

> Фактическая структура может немного отличаться по мере развития проекта, ниже — целевая.

```text
.
├── apps
│   └── tg-bot/            # Telegram-бот (Python, aiogram)
├── services
│   ├── calendar-core/     # Календарное ядро и логика расписаний (Go, gRPC)
│   └── booking-api/       # Публичный gRPC API для бота и прочих клиентов
├── infra
│   ├── docker/            # Конфигурация Docker / docker-compose
│   └── migrations/        # Миграции базы данных
└── docs
    └── technical-spec/    # Техническое задание и сопутствующие документы
