# Руководство пользователя (Telegram‑бот записи на услуги)

Документ описывает пользовательский интерфейс Telegram‑бота из модуля `app/telegram_bot` и порядок выполнения основных операций: выбор роли, поиск услуг, бронирование, просмотр и отмена записей.

## Начало работы

1. Откройте диалог с ботом в Telegram.
2. Отправьте команду `/start`.
3. Бот выполнит идентификацию по вашему Telegram ID и предложит:
   - «Выбрать роль / Настроить профиль»
   - «Главное меню»

Если во время запуска бот сообщает об ошибке связи с сервисами, повторите попытку позже.

## Роли пользователей

В системе предусмотрены две основные роли:

### Клиент

Клиент может:
- искать услуги и исполнителей (провайдеров);
- просматривать доступные слоты;
- создавать бронирование;
- смотреть список своих записей и отменять активные.

### Представитель услуг (провайдер)

Представитель услуг может:
- заполнить профиль (название/описание/контакт) при выборе роли;
- использовать меню представителя (разделы зависят от версии развернутого бота).

Примечание: в кодовой базе присутствуют заготовки сценариев управления расписанием и записями представителя, но доступность этих функций зависит от конкретной сборки/настройки (см. техническое руководство).

## Основные сценарии (роль «Клиент»)

### Поиск услуги и создание записи

1. В «Главном меню» выберите кнопку «Поиск услуг».
2. Выберите услугу из списка (поддерживается постраничная навигация).
3. Выберите исполнителя (провайдера) для выбранной услуги.
4. Выберите доступный слот (дата/время).
5. Подтвердите бронирование.

Если при подтверждении слот окажется недоступен (уже занят/конфликт), бот сообщит причину и предложит вернуться к выбору слота/исполнителя.

### Поиск провайдера по телефону

1. В «Главном меню» выберите «Найти провайдера по телефону».
2. Введите номер телефона (как на визитке).
3. Если провайдер найден — выберите его услугу.
4. Выберите слот и подтвердите бронирование.

### Мои записи (просмотр и отмена)

1. В «Главном меню» выберите «Мои записи».
2. Бот покажет список активных и прошедших/отменённых записей.
3. Нажмите на запись, чтобы открыть детали.
4. Чтобы отменить активную запись, нажмите «Отменить» или «Отменить эту запись».

После отмены бот покажет результат и предложит вернуться к списку записей или в главное меню.

### Профиль и помощь

- «Профиль» показывает текущие данные (имя, username, роль, контакт) и краткое описание возможностей.
- «Помощь» содержит краткую инструкцию по основным действиям.

## Важные особенности

### Время слотов

Слоты отображаются в формате `ДД.ММ ЧЧ:ММ`. В текущей реализации временные метки трактуются как UTC (если иное не заложено в серверной части).

### Ошибки и недоступность сервисов

Если core‑сервисы временно недоступны, бот покажет сообщение вида «Сервис временно недоступен, попробуйте позже.» Повторите действие через некоторое время.

### Конфиденциальность

Бот использует Telegram ID для идентификации. Контактные данные (телефон/username) сохраняются на серверной стороне (Identity сервис) после подтверждения пользователем.
